@using StorageMonster.Web.Services.Extensions
@using StorageMonster.Web.Views.Shared

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>

    @Html.IncludeCss(new[] 
    { 
        "~/Content/reset.css",
        "~/Content/themes/base/bootstrap.min.css",
        "~/Content/themes/base/bootstrap-responsive.min.css",
        "~/Content/themes/base/site.css"
    })
    
    @Html.IncludeJs(new[] 
    { 
        "~/Scripts/jquery-1.8.3.min.js",
        "~/Scripts/jquery.validate.min.js",
        "~/Scripts/jquery.validate.unobtrusive.min.js"
    })
   
    
     @Html.IncludeJs(new[]
            {
                "~/Scripts/monsterCommon.js"
            })

    @if (Request.IsAuthenticated)
    {
        @Html.IncludeJs(new[]
            {
                "~/Scripts/underscore.min.js",
                "~/Scripts/backbone.min.js",
                "~/Scripts/bootstrap.min.js",
                "~/Scripts/storagemonster.js"
            })
    }
        

</head>
    <body>
        <div id="main-menu">
            <div class="navbar navbar-fixed-top">
                <div class="navbar-inner">            
                    <div class="container-fluid">
                        <a class="brand" href="@Url.Content("~/")">@Resources.Title</a>  
                        @Html.Partial("~/Views/Shared/NavBarMenuPartial.cshtml")          
                    </div>
                </div>
            </div>   
        </div>
        @* сделай тут кнопку для тестовых целей которая будет спрашивать через обертку корень приложения *@
        <script>
            $(function () {
                $('#test').on('click', function (e) {
                    e.preventDefault();
                    var url = $(this).attr('href');
                    Ajax({
                        url: url,
                        cacheй: false,
                        dataType: 'json',
                        type: 'GET',
                        success: function (data) {
                            $('#Modal').modal('show');
                           // console.log(data);
                        },
                        error: function(error) {
                            $('#Modal .modal-body').html(error.responseText)
                            $('#Modal').modal('show');
                        }
                    });
                });
            })
        </script>
        <a id="test" href="@Url.Action("Index", "Home", null)">test</a><br>
        @RenderBody()
        <div id="Modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel"></h3>
                </div>
            <div class="modal-body">
                
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </body>
</html>
